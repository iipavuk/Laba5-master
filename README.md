# Лабораторная работа №5: Работа с данными. Конфигурации и файлы

- **Выполнила:** Торопчина
- **Язык программирования:** Java
- **Ссылка на API:** [ntv.ifmo.ru](https://ntv.ifmo.ru/file/journal/идентификатор_журнала.pdf)

## Описание приложения

Программа предоставляет простой интерфейс, где пользователь может:
- вводить ID журнала для его поиска;
- загружать найденный файл;
- открывать его для просмотра через внешние приложения;
- удалять файл из памяти устройства.

### Особенности:
- Кнопки "Открыть" и "Удалить" активируются только после успешной загрузки журнала.
- В дополнительной ветке `instruction` можно найти код, показывающий уведомление с кратким руководством по работе с приложением.

---

## Сценарий работы с кнопкой "Скачать"

### 1. Проверка введённого номера журнала
- Если поле ввода пустое, приложение выводит сообщение: _"Пожалуйста, введите номер журнала"._
- При корректном вводе ID начнётся загрузка файла с уведомлением: _"Файл загружается..."_

### 2. Создание директории для хранения журнала
- Если устройство работает на Android версии 10 или выше, доступ к хранилищу предоставляется автоматически. Для этого используется следующий алгоритм:

```java
private void createDirectoryAndDownload(String journalId) {
    File dir = new File(getExternalFilesDir(null), "JournalDownloads");
    if (!dir.exists()) {
        boolean isCreated = dir.mkdirs();  // Если директория отсутствует, создаём её
        if (isCreated) {
            Log.d("Directory", "Directory created successfully");
        } else {
            Log.d("Directory", "Failed to create directory");
            Toast.makeText(this, "Ошибка при создании директории!", Toast.LENGTH_SHORT).show();
            return;  // Завершаем выполнение, если создать папку не удалось
        }
    }
    // Начинаем загрузку
    String fileUrl = "https://ntv.ifmo.ru/file/journal/" + journalId + ".pdf";
    new DownloadFileTask(MainActivity.this).execute(fileUrl, journalId);
}
```  

### 3. Загрузка файла журнала
- Если указанный журнал не найден, приложение покажет сообщение _"Журнал не найден!"_.
- В случае успешной загрузки все функции приложения становятся доступными, а на экране появится сообщение _"Скачивание файла завершено!"_.

---

## Просмотр загруженного журнала

Кнопка "Открыть" активирует выбор приложения, которое поддерживает работу с PDF-файлами.

---

## Удаление загруженного файла

При нажатии на "Удалить" журнал будет удалён из памяти устройства, а на экране появится уведомление: _"Файл удалён."_

